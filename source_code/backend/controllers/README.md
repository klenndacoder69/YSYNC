What are controllers?

Controllers handle the logic of our code in the backend. 

What is an example of a component inside a controller?

Supposing this example (ref: this was taken from my past CS 100 project):

```js
const deleteUser = async (req, res) => {
  try{
    const {userId} = req.body;
    await User.findByIdAndDelete(userId);
    return res.status(200).json({message: "User successfully deleted", success: true});
  } catch (error) {
    console.error(error);
    res.status(500).json({error: "Error deleting user", success: false});
  }
}
```

This component is responsible for handling the deletion of a user in the database.

Let me explain each of the code blocks:

```js
const deleteUser = async (req, res) => ...
```

This part initializes an asynchronous function called deleteUser with parameters req (request) and res (response).

You might be wondering what are requests and responses.

In a server, we have what is called communication, just like communication between two people, a sender and a receiver. 
In CS terms, it is between a user and a server and they communicate thru requests and responses.

Each of the requests and responses generated by a sender and a receiver consist of what we call 'data', specifically in a JSON format style.

JSON is just a way to store data in a Javascript format-like structure. Below is an example of what a JSON object entails:

```js
const person = {
  "name": "John Doe",
  "age": 30,
  "isStudent": false,
  "skills": ["JavaScript", "HTML", "CSS"],
  "address": {
    "street": "123 Main St",
    "city": "Anytown",
    "country": "USA"
  }
}
```

You can access the information of the person object using dot notation (.):
```js
console.log(person.name) // will output John Doe
console.log(person.skills) // will output an array ["JavaScript", "HTML", "CSS"]
console.log(person.address.street) // will output 123 Main St
```
However, keep in mind that there are different ways of how JSON is represented, such as a JSON string, JSON object (what I showed you previously), JSON file, and etc.

They also have different ways of parsing so that we can read its data.


```js
{
    try {
        // Code that might throw an error
        let result = riskyOperation();
        console.log(result);
    } catch (error) {
        // Code to handle the error
        console.error("An error occurred:", error.message);
    }
}
```

The try-catch block is just a way (and a good way) of making sure that your program still runs even if somewhere in your code a problem/error occurred.

If in the riskyOperation function, an error occurred, it will just jump into the other conditional branch 'catch' and handles the error by logging it in the console.

Now, let us go to the main block of code.

```js
try{
    const {userId} = req.body;
    await User.findByIdAndDelete(userId);
    return res.status(200).json({message: "User successfully deleted", success: true});
  } catch (error) {
    console.error(error);
    res.status(500).json({error: "Error deleting user", success: false});
  }
```

Like what I said again previously, this code handles the deletion of a user in a database (specifically in the MongoDB database).

```js
const {userId} = req.body;
```

We have what we call JSON request bodies, and here we parese those JSON request bodies that we requested from the server.

Here we destructure the req.body. The req.body may look something like this:

```js
req.body = {
    userId: 123,
    name: "John Doe",
    email: "john@example.com",
    // other properties
};
```

By doing the line of code above, we can directly get userId.

```js
await User.findByIdAndDelete(userId);
```

This line of code tackles the functionalities of the User model in a database. I will be further explaining this to you, but think of it a function that automatically deletes that specific user using its userId as a parameter.

```js
return res.status(200).json({message: "User successfully deleted", success: true});
```

This return statement tackles the topic of responses, status codes, and a JSON format.

Let me break it down for you:

res => This indicates that we will be returning a response to the server

.status(200) => Status code 200 means a successful operation has occurred. You can find more of these status codes in the internet.

.json({message: "User successfully deleted", success: true}) => Earlier, we know that requests and responses are handled thru JSON format, here we send a JSON object to the user indicating that it was a successful message.

```js
catch (error) {
    console.error(error); // outputs the error in the console
    res.status(500).json({error: "Error deleting user", success: false}); // sends a response to the user that there was an error in deleting the user (probably the user does not exist in the database perhaps)
  }
```

If some of the lines inside the try block did not register correctly, it will directly go to the catch block to 'catch' the error.












